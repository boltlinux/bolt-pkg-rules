<?xml version="1.0" encoding="utf-8"?>
<rules>

    <prepare>
    <![CDATA[

cd $BOLT_BUILD_DIR
$BOLT_SOURCE_DIR/configure  \
    --prefix="$BOLT_INSTALL_PREFIX" \
    --with-sysroot=/ \
    --disable-multiarch \
    --disable-multilib \
    --disable-nls    \
    --disable-doc    \
    --disable-silent-rules \
    --enable-shared  \
    --enable-plugins \
    --with-system-zlib \
    --with-pkgversion="GNU Binutils for Bolt Linux" \
    --build="$BOLT_BUILD_TYPE" \
    --host="$BOLT_HOST_TYPE" \
    --target="$BOLT_TARGET_TYPE"

    ]]>
    </prepare>

    <build>
    <![CDATA[

cd $BOLT_BUILD_DIR
make MAKEINFO=true LEXLIB= -j"$BOLT_PARALLEL_JOBS"

    ]]>
    </build>

    <install>
    <![CDATA[

cd $BOLT_BUILD_DIR
make DESTDIR=$BOLT_INSTALL_DIR install

# turn hardlink into symbolic link
rm "$BOLT_INSTALL_DIR/usr/bin/ld"
ln -s ld.bfd "$BOLT_INSTALL_DIR/usr/bin/ld"

# copy additional header files
for i in demangle.h libiberty.h; do
    install -m 644 "$BOLT_SOURCE_DIR/include/$i" \
        "$BOLT_INSTALL_DIR/$BOLT_INSTALL_PREFIX/include"
done

    ]]>
    </install>

</rules>
